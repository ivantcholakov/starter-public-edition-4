{{ html_begin() }}
{{ head_begin() }}
{{ meta_charset() }}

{{ base_href() }}
{{ ie_edge() }}

{{ html_title() }}
{{ metadata() }}

{{ viewport() }}
{{ favicon() }}
{{ apple_touch_icon_precomposed() }}

{{ js_platform() }}

    <script type="text/javascript" src="{{ base_url('assets/composer-asset/components/webfontloader/webfontloader.js') }}"></script>
    <script type="text/javascript" src="{{ base_url('assets/js/webfontloader.js') }}"></script>


{{ theme_css('front.min.css?v=' ~ constant('PLATFORM_VERSION')) }}
{{ file_partial('css') }}
{{ partial('css') }}

{{ theme_js('front.min.js?v=' ~ constant('PLATFORM_VERSION')) }}

    <script type="text/javascript">
    //<![CDATA[

    // highlight.js - Turbolinks compatibility.

    hljs.called = false;
    hljs.ArrayProto = [];

    hljs.initHighlighting = function() {

        if (hljs.initHighlighting.called) {
            return;
        }

        hljs.initHighlighting.called = true;

        var blocks = document.querySelectorAll('pre code');
        hljs.ArrayProto.forEach.call(blocks, hljs.highlightBlock);
    }

    hljs.initHighlightingOnLoad = function() {

        if (! hljs.initHighlighting.called) {

            addEventListener('turbolinks:load', hljs.initHighlighting, false);
            addEventListener('turbolinks:render', hljs.initHighlighting, false);
            addEventListener('DOMContentLoaded', hljs.initHighlighting, false);
            addEventListener('load', hljs.initHighlighting, false);
        }
    }

    hljs.initHighlightingOnLoad();

    //]]>
    </script>

{{ partial('ckeditor') }}

{{ partial('head') }}

{{ head_end() }}

{% set body_attr = {'id': 'page-top'} %}
{% if template.module is not empty %}
    {% set body_attr = html_attr_add_class(body_attr, template.module ~ '_module') %}
{% endif %}
{% if template.controller is not empty %}
    {% set body_attr = html_attr_add_class(body_attr, template.controller) %}
{% endif %}
{% if template.method is not empty %}
    {% set body_attr = html_attr_add_class(body_attr, template.method ~ '_method') %}
{% endif %}
{% if id is not empty %}
    {% set body_attr = html_attr_add_class(body_attr, 'item_' ~ id) %}
{% endif %}
{{ body_begin(body_attr) }}

{{ widget('main_menu_widget') }}

    <header id="header">

        <div class="ui vertically padded grid page">

{{ widget('breadcrumb_widget') }}

{% if template.page_title is not empty %}

            <div class="row">
                <div class="column">

                    <h1 class="ui header">{{ template.page_title }}</h1>

                </div>
            </div>

{% endif %}

        </div>

    </header>

    <main id="main_content">

        <div class="ui vertically padded grid page">

{{ widget('feedback_messages_widget', {
    'feedback_message_target': feedback_message_target,
    'normal_message': normal_message,
    'confirmation_message': confirmation_message,
    'warning_message': warning_message,
    'error_message': error_message
}) }}

            <div class="row">
                <div id="content-container" class="sixteen wide column">

{{ body() }}

                </div>
            </div>

        </div>

    </main>

{{ widget('footer_widget') }}

{{ js_bp_plugins() }}
{{ js_mbp_helper() }}
{{ js_scale_fix_ios() }}

{{ file_partial('scripts') }}
{{ partial('scripts') }}

{{ js('front.js') }}

    <div id="debug"></div>

{{ file_partial('google_analytics') }}

{{ body_end() }}
{{ html_end() }}
